<!doctype html>
<html>
  <head>
    <title>Trace Generator</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body style="font-family: Verdana, Tahoma, Geneva, sans-serif">
    <form method="post">
      <h1>OpenTelemetry Collector Settings</h1>

      <div class="param">
        <p class="caption">Target hostname:</p>
        <div class="tooltip" style="display: inline">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >Hostname of the OpenTelemetry Collector to send traces to</span
          >
        </div>
        <br />
        <input
          type="text"
          value="localhost"
          name="targetHostname"
          pattern="[a-zA-Z0-9\.\-]+"
          required
          oninvalid="this.setCustomValidity('Hostname may only include A-Z, a-z, 0-9, . and -')"
          oninput="this.setCustomValidity('')"
        />
      </div>

      <div class="param">
        <p class="caption">Target port:</p>
        <div class="tooltip" style="display: inline">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >Port of the OpenTelemetry Collector to send traces to</span
          >
        </div>
        <br />
        <input
          type="number"
          min="0"
          step="1"
          value="55678"
          name="targetPort"
          required
        />
      </div>

      <h1>App generation settings</h1>

      <div class="param">
        <p class="caption">Number of apps:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How many applications should be involved in the trace</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="500"
          value="1"
          name="appCount"
          id="range_appCount"
        />
        <label for="range_appCount" class="label" id="label_appCount"></label>
      </div>

      <div class="param">
        <p class="caption">Package depth:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How deep the package structure of the generated apps should go,
            i.e. up to 4 layers of packages</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="10"
          value="4"
          name="packageDepth"
          id="range_packageDepth"
        />
        <label
          for="range_packageDepth"
          class="label"
          id="label_packageDepth"
        ></label>
      </div>

      <div class="param">
        <p class="caption">Minimum class count:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How many classes all of the generated apps must have at the very
            least</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="200"
          value="5"
          name="minClassCount"
          id="range_minClassCount"
        />
        <label
          for="range_minClassCount"
          class="label"
          id="label_minClassCount"
        ></label>
      </div>

      <div class="param">
        <p class="caption">Maximum class count:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How many classes any of the generated apps may have at the
            most</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="200"
          value="20"
          name="maxClassCount"
          id="range_maxClassCount"
        />
        <label
          for="range_maxClassCount"
          class="label"
          id="label_maxClassCount"
        ></label>
      </div>

      <div class="param">
        <p class="caption">Minimum method count:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How many methods any of the generated <i>classes</i> must have at
            the very least</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="10"
          value="1"
          name="minMethodCount"
          id="range_minMethodCount"
        />
        <label
          for="range_minMethodCount"
          class="label"
          id="label_minMethodCount"
        ></label>
      </div>

      <div class="param">
        <p class="caption">Maximum method count:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How many methods any of the generated <i>classes</i> may have at
            the most</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="10"
          value="5"
          name="maxMethodCount"
          id="range_maxMethodCount"
        />
        <label
          for="range_maxMethodCount"
          class="label"
          id="label_maxMethodCount"
        ></label>
      </div>

      <div class="param">
        <p class="caption">Class Distribution Balance:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >This parameter controls how equally classes are distributed among
            the different package layers of the application. Very low balance
            values mean that classes are more likely to be placed near the root
            package of the applications, meaning that the application is not
            very nested. A value of 1 leads to a more balanced
            distribution</span
          >
        </div>
        <br />
        <input
          type="range"
          min="0"
          max="1"
          step="0.2"
          value="1"
          name="balance"
          id="range_balance"
        />
        <label for="range_balance" class="label" id="label_balance"></label>
      </div>

      <div class="param">
        <p class="caption">App Generation Seed:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >By setting a seed, the generation results become reproducable.
            Leave empty for random seed</span
          >
        </div>
        <br />
        <input type="number" min="0" step="1" value="" name="appSeed" />
      </div>

      <h1>Trace generation settings</h1>

      <div class="param">
        <p class="caption">Duration (ms):</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How long the trace shoud last for (in milliseconds). The calls are
            evenly distributed in this timeframe</span
          >
        </div>
        <br />
        <input
          type="range"
          min="100"
          max="10000"
          value="1000"
          name="duration"
          id="range_duration"
        />
        <label for="range_duration" class="label" id="label_duration"></label>
      </div>

      <div class="param">
        <p class="caption">Method Call Count:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How many method calls should occur within the duration of the
            trace. This corresponds to the number of spans that are sent
            out</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="10000"
          value="100"
          name="callCount"
          id="range_callCount"
        />
        <label for="range_callCount" class="label" id="label_callCount"></label>
      </div>

      <div class="param">
        <p class="caption">Max Call Depth:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >How nested the method call stack may become (one method calls
            another, which calls another ...)</span
          >
        </div>
        <br />
        <input
          type="range"
          min="1"
          max="100"
          value="10"
          name="maxCallDepth"
          id="range_maxCallDepth"
        />
        <label
          for="range_maxCallDepth"
          class="label"
          id="label_maxCallDepth"
        ></label>
      </div>

      <div class="param">
        <p class="caption">Communication Style:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >Controls in which way different classes communicate with one
            another.<br />- True Random: The next class gets picked at random,
            from any package in any app<br />- Cohesive: We stay inside the
            package we're in. Every package contains one single "interface"
            class, which when chosen leads to a linked class outside its package
            in the next call<br />- Random Exit: We stay inside the package
            we're in. We sometimes (at random) jump to a class outside our
            package
          </span>
        </div>
        <br />
        <select
          name="communicationStyle"
          id="select_communicationStyle"
          required
        >
          <option value="true_random">True Random</option>
          <option value="cohesive">Cohesive</option>
          <option value="random_exit">Random Exit</option>
        </select>
      </div>

      <br />

      <div class="param">
        <p class="caption">Allow cyclic calls:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >Whether to allow loops in the method call stack. This also includes
            recursive function calls</span
          >
        </div>
        <br />
        <input
          type="checkbox"
          name="cyclicCalls"
          value="on"
          id="checkbox_cyclicCalls"
        />
      </div>

      <div class="param">
        <p class="caption">Trace Generation Seed:</p>
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >By setting a seed, the generation results become reproducable.
            Leave empty for random seed</span
          >
        </div>
        <br />
        <input type="number" min="0" step="1" value="" name="traceSeed" />
      </div>

      <h1 style="display: inline">Custom Span Attributes</h1>
      <div class="tooltip" style="top: -5px">
        <a><b>?</b></a>
        <span class="tooltiptext"
          >This section allows setting (fixed-valued) attributes which are
          included with every generated span</span
        >
      </div>
      <br />

      <div class="custom_attribute">
        <input
          type="text"
          value="explorviz.token.id"
          name="key_customAttribute1"
          style="opacity: 0.5"
          readonly
        />
        <div style="display: inline">:</div>
        <input
          type="text"
          value="mytokenvalue"
          name="value_customAttribute1"
          pattern="[a-zA-Z0-9\.\-]+"
          required
          oninvalid="this.setCustomValidity('Token ID may only include A-Z, a-z, 0-9, . and -')"
          oninput="this.setCustomValidity('')"
        />
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >The landscape token ID. Copy this from the landscape selection
            screen</span
          >
        </div>
      </div>

      <div class="custom_attribute">
        <input
          type="text"
          value="explorviz.token.secret"
          name="key_customAttribute2"
          style="opacity: 0.5"
          readonly
        />
        <div style="display: inline">:</div>
        <input
          type="text"
          value="mytokensecret"
          name="value_customAttribute2"
          pattern="[a-zA-Z0-9\.\-]+"
          required
          oninvalid="this.setCustomValidity('Token secret may only include A-Z, a-z, 0-9, . and -')"
          oninput="this.setCustomValidity('')"
        />
        <div class="tooltip">
          <a><b>?</b></a>
          <span class="tooltiptext"
            >The landscape token secret. Copy this from the landscape selection
            screen</span
          >
        </div>
      </div>

      <br />

      <div>
        <button type="submit" class="button_submit">Send trace</button>
        <input
          type="checkbox"
          name="addToPreviousTrace"
          value="on"
          style="vertical-align: baseline"
          id="checkbox_addToPreviousTrace"
          checked
        />
        <label for="checkbox_addToPreviousTrace"
          >Add to previous trace (if applicable)</label
        >
      </div>
    </form>

    <br />

    <script src="script.js"></script>
  </body>
</html>
